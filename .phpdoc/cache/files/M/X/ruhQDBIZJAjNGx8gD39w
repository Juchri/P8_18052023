1723816630
waR3U4bTeM%3A179602663372bb676e6374a963d8441c-2ff4e1f8ad296d928d9e443236207ee6
s:22152:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxMjp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6IjJmZjRlMWY4YWQyOTZkOTI4ZDllNDQzMjM2MjA3ZWU2IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTg6IkltYWdlVmFsaWRhdG9yLnBocCI7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBwYXRoIjtzOjg1OiJ2ZW5kb3Ivc3ltZm9ueS9zeW1mb255L3NyYy9TeW1mb255L0NvbXBvbmVudC9WYWxpZGF0b3IvQ29uc3RyYWludHMvSW1hZ2VWYWxpZGF0b3IucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czo5Mzg3OiI8P3BocAoKLyoKICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIFN5bWZvbnkgcGFja2FnZS4KICoKICogKGMpIEZhYmllbiBQb3RlbmNpZXIgPGZhYmllbkBzeW1mb255LmNvbT4KICoKICogRm9yIHRoZSBmdWxsIGNvcHlyaWdodCBhbmQgbGljZW5zZSBpbmZvcm1hdGlvbiwgcGxlYXNlIHZpZXcgdGhlIExJQ0VOU0UKICogZmlsZSB0aGF0IHdhcyBkaXN0cmlidXRlZCB3aXRoIHRoaXMgc291cmNlIGNvZGUuCiAqLwoKbmFtZXNwYWNlIFN5bWZvbnlcQ29tcG9uZW50XFZhbGlkYXRvclxDb25zdHJhaW50czsKCnVzZSBTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcQ29uc3RyYWludDsKdXNlIFN5bWZvbnlcQ29tcG9uZW50XFZhbGlkYXRvclxFeGNlcHRpb25cQ29uc3RyYWludERlZmluaXRpb25FeGNlcHRpb247CnVzZSBTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcRXhjZXB0aW9uXFJ1bnRpbWVFeGNlcHRpb247CnVzZSBTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcRXhjZXB0aW9uXFVuZXhwZWN0ZWRUeXBlRXhjZXB0aW9uOwoKLyoqCiAqIFZhbGlkYXRlcyB3aGV0aGVyIGEgdmFsdWUgaXMgYSB2YWxpZCBpbWFnZSBmaWxlIGFuZCBpcyB2YWxpZAogKiBhZ2FpbnN0IG1pbldpZHRoLCBtYXhXaWR0aCwgbWluSGVpZ2h0IGFuZCBtYXhIZWlnaHQgY29uc3RyYWludHMuCiAqCiAqIEBhdXRob3IgQmVuamFtaW4gRHVsYXUgPGJlbmphbWluLmR1bGF1QGdtYWlsLmNvbT4KICogQGF1dGhvciBCZXJuaGFyZCBTY2h1c3NlayA8YnNjaHVzc2VrQGdtYWlsLmNvbT4KICovCmNsYXNzIEltYWdlVmFsaWRhdG9yIGV4dGVuZHMgRmlsZVZhbGlkYXRvcgp7CiAgICAvKioKICAgICAqIHtAaW5oZXJpdGRvY30KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHZhbGlkYXRlKCR2YWx1ZSwgQ29uc3RyYWludCAkY29uc3RyYWludCkKICAgIHsKICAgICAgICBpZiAoISRjb25zdHJhaW50IGluc3RhbmNlb2YgSW1hZ2UpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFVuZXhwZWN0ZWRUeXBlRXhjZXB0aW9uKCRjb25zdHJhaW50LCBJbWFnZTo6Y2xhc3MpOwogICAgICAgIH0KCiAgICAgICAgJHZpb2xhdGlvbnMgPSBcY291bnQoJHRoaXMtPmNvbnRleHQtPmdldFZpb2xhdGlvbnMoKSk7CgogICAgICAgIHBhcmVudDo6dmFsaWRhdGUoJHZhbHVlLCAkY29uc3RyYWludCk7CgogICAgICAgICRmYWlsZWQgPSBcY291bnQoJHRoaXMtPmNvbnRleHQtPmdldFZpb2xhdGlvbnMoKSkgIT09ICR2aW9sYXRpb25zOwoKICAgICAgICBpZiAoJGZhaWxlZCB8fCBudWxsID09PSAkdmFsdWUgfHwgJycgPT09ICR2YWx1ZSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAobnVsbCA9PT0gJGNvbnN0cmFpbnQtPm1pbldpZHRoICYmIG51bGwgPT09ICRjb25zdHJhaW50LT5tYXhXaWR0aAogICAgICAgICAgICAmJiBudWxsID09PSAkY29uc3RyYWludC0+bWluSGVpZ2h0ICYmIG51bGwgPT09ICRjb25zdHJhaW50LT5tYXhIZWlnaHQKICAgICAgICAgICAgJiYgbnVsbCA9PT0gJGNvbnN0cmFpbnQtPm1pblBpeGVscyAmJiBudWxsID09PSAkY29uc3RyYWludC0+bWF4UGl4ZWxzCiAgICAgICAgICAgICYmIG51bGwgPT09ICRjb25zdHJhaW50LT5taW5SYXRpbyAmJiBudWxsID09PSAkY29uc3RyYWludC0+bWF4UmF0aW8KICAgICAgICAgICAgJiYgJGNvbnN0cmFpbnQtPmFsbG93U3F1YXJlICYmICRjb25zdHJhaW50LT5hbGxvd0xhbmRzY2FwZSAmJiAkY29uc3RyYWludC0+YWxsb3dQb3J0cmFpdAogICAgICAgICAgICAmJiAhJGNvbnN0cmFpbnQtPmRldGVjdENvcnJ1cHRlZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAkc2l6ZSA9IEBnZXRpbWFnZXNpemUoJHZhbHVlKTsKCiAgICAgICAgaWYgKGVtcHR5KCRzaXplKSB8fCAoMCA9PT0gJHNpemVbMF0pIHx8ICgwID09PSAkc2l6ZVsxXSkpIHsKICAgICAgICAgICAgJHRoaXMtPmNvbnRleHQtPmJ1aWxkVmlvbGF0aW9uKCRjb25zdHJhaW50LT5zaXplTm90RGV0ZWN0ZWRNZXNzYWdlKQogICAgICAgICAgICAgICAgLT5zZXRDb2RlKEltYWdlOjpTSVpFX05PVF9ERVRFQ1RFRF9FUlJPUikKICAgICAgICAgICAgICAgIC0+YWRkVmlvbGF0aW9uKCk7CgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAkd2lkdGggPSAkc2l6ZVswXTsKICAgICAgICAkaGVpZ2h0ID0gJHNpemVbMV07CgogICAgICAgIGlmICgkY29uc3RyYWludC0+bWluV2lkdGgpIHsKICAgICAgICAgICAgaWYgKCFjdHlwZV9kaWdpdCgoc3RyaW5nKSAkY29uc3RyYWludC0+bWluV2lkdGgpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29uc3RyYWludERlZmluaXRpb25FeGNlcHRpb24oc3ByaW50ZignIiVzIiBpcyBub3QgYSB2YWxpZCBtaW5pbXVtIHdpZHRoLicsICRjb25zdHJhaW50LT5taW5XaWR0aCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHdpZHRoIDwgJGNvbnN0cmFpbnQtPm1pbldpZHRoKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+Y29udGV4dC0+YnVpbGRWaW9sYXRpb24oJGNvbnN0cmFpbnQtPm1pbldpZHRoTWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgd2lkdGggfX0nLCAkd2lkdGgpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IG1pbl93aWR0aCB9fScsICRjb25zdHJhaW50LT5taW5XaWR0aCkKICAgICAgICAgICAgICAgICAgICAtPnNldENvZGUoSW1hZ2U6OlRPT19OQVJST1dfRVJST1IpCiAgICAgICAgICAgICAgICAgICAgLT5hZGRWaW9sYXRpb24oKTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICgkY29uc3RyYWludC0+bWF4V2lkdGgpIHsKICAgICAgICAgICAgaWYgKCFjdHlwZV9kaWdpdCgoc3RyaW5nKSAkY29uc3RyYWludC0+bWF4V2lkdGgpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29uc3RyYWludERlZmluaXRpb25FeGNlcHRpb24oc3ByaW50ZignIiVzIiBpcyBub3QgYSB2YWxpZCBtYXhpbXVtIHdpZHRoLicsICRjb25zdHJhaW50LT5tYXhXaWR0aCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHdpZHRoID4gJGNvbnN0cmFpbnQtPm1heFdpZHRoKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+Y29udGV4dC0+YnVpbGRWaW9sYXRpb24oJGNvbnN0cmFpbnQtPm1heFdpZHRoTWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgd2lkdGggfX0nLCAkd2lkdGgpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IG1heF93aWR0aCB9fScsICRjb25zdHJhaW50LT5tYXhXaWR0aCkKICAgICAgICAgICAgICAgICAgICAtPnNldENvZGUoSW1hZ2U6OlRPT19XSURFX0VSUk9SKQogICAgICAgICAgICAgICAgICAgIC0+YWRkVmlvbGF0aW9uKCk7CgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoJGNvbnN0cmFpbnQtPm1pbkhlaWdodCkgewogICAgICAgICAgICBpZiAoIWN0eXBlX2RpZ2l0KChzdHJpbmcpICRjb25zdHJhaW50LT5taW5IZWlnaHQpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29uc3RyYWludERlZmluaXRpb25FeGNlcHRpb24oc3ByaW50ZignIiVzIiBpcyBub3QgYSB2YWxpZCBtaW5pbXVtIGhlaWdodC4nLCAkY29uc3RyYWludC0+bWluSGVpZ2h0KSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgkaGVpZ2h0IDwgJGNvbnN0cmFpbnQtPm1pbkhlaWdodCkgewogICAgICAgICAgICAgICAgJHRoaXMtPmNvbnRleHQtPmJ1aWxkVmlvbGF0aW9uKCRjb25zdHJhaW50LT5taW5IZWlnaHRNZXNzYWdlKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBoZWlnaHQgfX0nLCAkaGVpZ2h0KQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBtaW5faGVpZ2h0IH19JywgJGNvbnN0cmFpbnQtPm1pbkhlaWdodCkKICAgICAgICAgICAgICAgICAgICAtPnNldENvZGUoSW1hZ2U6OlRPT19MT1dfRVJST1IpCiAgICAgICAgICAgICAgICAgICAgLT5hZGRWaW9sYXRpb24oKTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICgkY29uc3RyYWludC0+bWF4SGVpZ2h0KSB7CiAgICAgICAgICAgIGlmICghY3R5cGVfZGlnaXQoKHN0cmluZykgJGNvbnN0cmFpbnQtPm1heEhlaWdodCkpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25zdHJhaW50RGVmaW5pdGlvbkV4Y2VwdGlvbihzcHJpbnRmKCciJXMiIGlzIG5vdCBhIHZhbGlkIG1heGltdW0gaGVpZ2h0LicsICRjb25zdHJhaW50LT5tYXhIZWlnaHQpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCRoZWlnaHQgPiAkY29uc3RyYWludC0+bWF4SGVpZ2h0KSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+Y29udGV4dC0+YnVpbGRWaW9sYXRpb24oJGNvbnN0cmFpbnQtPm1heEhlaWdodE1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IGhlaWdodCB9fScsICRoZWlnaHQpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IG1heF9oZWlnaHQgfX0nLCAkY29uc3RyYWludC0+bWF4SGVpZ2h0KQogICAgICAgICAgICAgICAgICAgIC0+c2V0Q29kZShJbWFnZTo6VE9PX0hJR0hfRVJST1IpCiAgICAgICAgICAgICAgICAgICAgLT5hZGRWaW9sYXRpb24oKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJHBpeGVscyA9ICR3aWR0aCAqICRoZWlnaHQ7CgogICAgICAgIGlmIChudWxsICE9PSAkY29uc3RyYWludC0+bWluUGl4ZWxzKSB7CiAgICAgICAgICAgIGlmICghY3R5cGVfZGlnaXQoKHN0cmluZykgJGNvbnN0cmFpbnQtPm1pblBpeGVscykpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25zdHJhaW50RGVmaW5pdGlvbkV4Y2VwdGlvbihzcHJpbnRmKCciJXMiIGlzIG5vdCBhIHZhbGlkIG1pbmltdW0gYW1vdW50IG9mIHBpeGVscy4nLCAkY29uc3RyYWludC0+bWluUGl4ZWxzKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgkcGl4ZWxzIDwgJGNvbnN0cmFpbnQtPm1pblBpeGVscykgewogICAgICAgICAgICAgICAgJHRoaXMtPmNvbnRleHQtPmJ1aWxkVmlvbGF0aW9uKCRjb25zdHJhaW50LT5taW5QaXhlbHNNZXNzYWdlKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBwaXhlbHMgfX0nLCAkcGl4ZWxzKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBtaW5fcGl4ZWxzIH19JywgJGNvbnN0cmFpbnQtPm1pblBpeGVscykKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgaGVpZ2h0IH19JywgJGhlaWdodCkKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgd2lkdGggfX0nLCAkd2lkdGgpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRDb2RlKEltYWdlOjpUT09fRkVXX1BJWEVMX0VSUk9SKQogICAgICAgICAgICAgICAgICAgIC0+YWRkVmlvbGF0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChudWxsICE9PSAkY29uc3RyYWludC0+bWF4UGl4ZWxzKSB7CiAgICAgICAgICAgIGlmICghY3R5cGVfZGlnaXQoKHN0cmluZykgJGNvbnN0cmFpbnQtPm1heFBpeGVscykpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25zdHJhaW50RGVmaW5pdGlvbkV4Y2VwdGlvbihzcHJpbnRmKCciJXMiIGlzIG5vdCBhIHZhbGlkIG1heGltdW0gYW1vdW50IG9mIHBpeGVscy4nLCAkY29uc3RyYWludC0+bWF4UGl4ZWxzKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgkcGl4ZWxzID4gJGNvbnN0cmFpbnQtPm1heFBpeGVscykgewogICAgICAgICAgICAgICAgJHRoaXMtPmNvbnRleHQtPmJ1aWxkVmlvbGF0aW9uKCRjb25zdHJhaW50LT5tYXhQaXhlbHNNZXNzYWdlKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBwaXhlbHMgfX0nLCAkcGl4ZWxzKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBtYXhfcGl4ZWxzIH19JywgJGNvbnN0cmFpbnQtPm1heFBpeGVscykKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgaGVpZ2h0IH19JywgJGhlaWdodCkKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgd2lkdGggfX0nLCAkd2lkdGgpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRDb2RlKEltYWdlOjpUT09fTUFOWV9QSVhFTF9FUlJPUikKICAgICAgICAgICAgICAgICAgICAtPmFkZFZpb2xhdGlvbigpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkcmF0aW8gPSByb3VuZCgkd2lkdGggLyAkaGVpZ2h0LCAyKTsKCiAgICAgICAgaWYgKG51bGwgIT09ICRjb25zdHJhaW50LT5taW5SYXRpbykgewogICAgICAgICAgICBpZiAoIWlzX251bWVyaWMoKHN0cmluZykgJGNvbnN0cmFpbnQtPm1pblJhdGlvKSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IENvbnN0cmFpbnREZWZpbml0aW9uRXhjZXB0aW9uKHNwcmludGYoJyIlcyIgaXMgbm90IGEgdmFsaWQgbWluaW11bSByYXRpby4nLCAkY29uc3RyYWludC0+bWluUmF0aW8pKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCRyYXRpbyA8ICRjb25zdHJhaW50LT5taW5SYXRpbykgewogICAgICAgICAgICAgICAgJHRoaXMtPmNvbnRleHQtPmJ1aWxkVmlvbGF0aW9uKCRjb25zdHJhaW50LT5taW5SYXRpb01lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IHJhdGlvIH19JywgJHJhdGlvKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBtaW5fcmF0aW8gfX0nLCAkY29uc3RyYWludC0+bWluUmF0aW8pCiAgICAgICAgICAgICAgICAgICAgLT5zZXRDb2RlKEltYWdlOjpSQVRJT19UT09fU01BTExfRVJST1IpCiAgICAgICAgICAgICAgICAgICAgLT5hZGRWaW9sYXRpb24oKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKG51bGwgIT09ICRjb25zdHJhaW50LT5tYXhSYXRpbykgewogICAgICAgICAgICBpZiAoIWlzX251bWVyaWMoKHN0cmluZykgJGNvbnN0cmFpbnQtPm1heFJhdGlvKSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IENvbnN0cmFpbnREZWZpbml0aW9uRXhjZXB0aW9uKHNwcmludGYoJyIlcyIgaXMgbm90IGEgdmFsaWQgbWF4aW11bSByYXRpby4nLCAkY29uc3RyYWludC0+bWF4UmF0aW8pKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCRyYXRpbyA+ICRjb25zdHJhaW50LT5tYXhSYXRpbykgewogICAgICAgICAgICAgICAgJHRoaXMtPmNvbnRleHQtPmJ1aWxkVmlvbGF0aW9uKCRjb25zdHJhaW50LT5tYXhSYXRpb01lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IHJhdGlvIH19JywgJHJhdGlvKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBtYXhfcmF0aW8gfX0nLCAkY29uc3RyYWludC0+bWF4UmF0aW8pCiAgICAgICAgICAgICAgICAgICAgLT5zZXRDb2RlKEltYWdlOjpSQVRJT19UT09fQklHX0VSUk9SKQogICAgICAgICAgICAgICAgICAgIC0+YWRkVmlvbGF0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghJGNvbnN0cmFpbnQtPmFsbG93U3F1YXJlICYmICR3aWR0aCA9PSAkaGVpZ2h0KSB7CiAgICAgICAgICAgICR0aGlzLT5jb250ZXh0LT5idWlsZFZpb2xhdGlvbigkY29uc3RyYWludC0+YWxsb3dTcXVhcmVNZXNzYWdlKQogICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IHdpZHRoIH19JywgJHdpZHRoKQogICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IGhlaWdodCB9fScsICRoZWlnaHQpCiAgICAgICAgICAgICAgICAtPnNldENvZGUoSW1hZ2U6OlNRVUFSRV9OT1RfQUxMT1dFRF9FUlJPUikKICAgICAgICAgICAgICAgIC0+YWRkVmlvbGF0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoISRjb25zdHJhaW50LT5hbGxvd0xhbmRzY2FwZSAmJiAkd2lkdGggPiAkaGVpZ2h0KSB7CiAgICAgICAgICAgICR0aGlzLT5jb250ZXh0LT5idWlsZFZpb2xhdGlvbigkY29uc3RyYWludC0+YWxsb3dMYW5kc2NhcGVNZXNzYWdlKQogICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IHdpZHRoIH19JywgJHdpZHRoKQogICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IGhlaWdodCB9fScsICRoZWlnaHQpCiAgICAgICAgICAgICAgICAtPnNldENvZGUoSW1hZ2U6OkxBTkRTQ0FQRV9OT1RfQUxMT1dFRF9FUlJPUikKICAgICAgICAgICAgICAgIC0+YWRkVmlvbGF0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoISRjb25zdHJhaW50LT5hbGxvd1BvcnRyYWl0ICYmICR3aWR0aCA8ICRoZWlnaHQpIHsKICAgICAgICAgICAgJHRoaXMtPmNvbnRleHQtPmJ1aWxkVmlvbGF0aW9uKCRjb25zdHJhaW50LT5hbGxvd1BvcnRyYWl0TWVzc2FnZSkKICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyB3aWR0aCB9fScsICR3aWR0aCkKICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBoZWlnaHQgfX0nLCAkaGVpZ2h0KQogICAgICAgICAgICAgICAgLT5zZXRDb2RlKEltYWdlOjpQT1JUUkFJVF9OT1RfQUxMT1dFRF9FUlJPUikKICAgICAgICAgICAgICAgIC0+YWRkVmlvbGF0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoJGNvbnN0cmFpbnQtPmRldGVjdENvcnJ1cHRlZCkgewogICAgICAgICAgICBpZiAoIVxmdW5jdGlvbl9leGlzdHMoJ2ltYWdlY3JlYXRlZnJvbXN0cmluZycpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbignQ29ycnVwdGVkIGltYWdlcyBkZXRlY3Rpb24gcmVxdWlyZXMgaW5zdGFsbGVkIGFuZCBlbmFibGVkIEdEIGV4dGVuc2lvbi4nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHJlc291cmNlID0gQGltYWdlY3JlYXRlZnJvbXN0cmluZyhmaWxlX2dldF9jb250ZW50cygkdmFsdWUpKTsKCiAgICAgICAgICAgIGlmIChmYWxzZSA9PT0gJHJlc291cmNlKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+Y29udGV4dC0+YnVpbGRWaW9sYXRpb24oJGNvbnN0cmFpbnQtPmNvcnJ1cHRlZE1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRDb2RlKEltYWdlOjpDT1JSVVBURURfSU1BR0VfRVJST1IpCiAgICAgICAgICAgICAgICAgICAgLT5hZGRWaW9sYXRpb24oKTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGltYWdlZGVzdHJveSgkcmVzb3VyY2UpOwogICAgICAgIH0KICAgIH0KfQoiO3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAbmFtZXNwYWNlcyI7YToxOntzOjQwOiJcU3ltZm9ueVxDb21wb25lbnRcVmFsaWRhdG9yXENvbnN0cmFpbnRzIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6NDA6IlxTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcQ29uc3RyYWludHMiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czoxMToiQ29uc3RyYWludHMiO319czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbmNsdWRlcyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBmdW5jdGlvbnMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY29uc3RhbnRzIjthOjA6e31zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNsYXNzZXMiO2E6MTp7czo1NToiXFN5bWZvbnlcQ29tcG9uZW50XFZhbGlkYXRvclxDb25zdHJhaW50c1xJbWFnZVZhbGlkYXRvciI7TzozNToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18iOjExOntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czo1NToiXFN5bWZvbnlcQ29tcG9uZW50XFZhbGlkYXRvclxDb25zdHJhaW50c1xJbWFnZVZhbGlkYXRvciI7czozNjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBuYW1lIjtzOjE0OiJJbWFnZVZhbGlkYXRvciI7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBkb2NCbG9jayI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrIjo3OntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAHN1bW1hcnkiO3M6MTI1OiJWYWxpZGF0ZXMgd2hldGhlciBhIHZhbHVlIGlzIGEgdmFsaWQgaW1hZ2UgZmlsZSBhbmQgaXMgdmFsaWQKYWdhaW5zdCBtaW5XaWR0aCwgbWF4V2lkdGgsIG1pbkhlaWdodCBhbmQgbWF4SGVpZ2h0IGNvbnN0cmFpbnRzLiI7czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBkZXNjcmlwdGlvbiI7Tzo0NToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXERlc2NyaXB0aW9uIjoyOntzOjU5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXERlc2NyaXB0aW9uAGJvZHlUZW1wbGF0ZSI7czowOiIiO3M6NTE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AdGFncyI7YTowOnt9fXM6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAdGFncyI7YToyOntpOjA7Tzo0NToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXFRhZ3NcQXV0aG9yIjo0OntzOjc6IgAqAG5hbWUiO3M6NjoiYXV0aG9yIjtzOjU3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXFRhZ3NcQXV0aG9yAGF1dGhvck5hbWUiO3M6MTQ6IkJlbmphbWluIER1bGF1IjtzOjU4OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXFRhZ3NcQXV0aG9yAGF1dGhvckVtYWlsIjtzOjI0OiJiZW5qYW1pbi5kdWxhdUBnbWFpbC5jb20iO3M6MTQ6IgAqAGRlc2NyaXB0aW9uIjtOO31pOjE7Tzo0NToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXFRhZ3NcQXV0aG9yIjo0OntzOjc6IgAqAG5hbWUiO3M6NjoiYXV0aG9yIjtzOjU3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXFRhZ3NcQXV0aG9yAGF1dGhvck5hbWUiO3M6MTc6IkJlcm5oYXJkIFNjaHVzc2VrIjtzOjU4OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXFRhZ3NcQXV0aG9yAGF1dGhvckVtYWlsIjtzOjE5OiJic2NodXNzZWtAZ21haWwuY29tIjtzOjE0OiIAKgBkZXNjcmlwdGlvbiI7Tjt9fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAY29udGV4dCI7TzozODoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXENvbnRleHQiOjI6e3M6NDk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dABuYW1lc3BhY2UiO3M6Mzk6IlN5bWZvbnlcQ29tcG9uZW50XFZhbGlkYXRvclxDb25zdHJhaW50cyI7czo1NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZUFsaWFzZXMiO2E6NDp7czoxMDoiQ29uc3RyYWludCI7czozODoiU3ltZm9ueVxDb21wb25lbnRcVmFsaWRhdG9yXENvbnN0cmFpbnQiO3M6Mjk6IkNvbnN0cmFpbnREZWZpbml0aW9uRXhjZXB0aW9uIjtzOjY3OiJTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcRXhjZXB0aW9uXENvbnN0cmFpbnREZWZpbml0aW9uRXhjZXB0aW9uIjtzOjE2OiJSdW50aW1lRXhjZXB0aW9uIjtzOjU0OiJTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcRXhjZXB0aW9uXFJ1bnRpbWVFeGNlcHRpb24iO3M6MjM6IlVuZXhwZWN0ZWRUeXBlRXhjZXB0aW9uIjtzOjYxOiJTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcRXhjZXB0aW9uXFVuZXhwZWN0ZWRUeXBlRXhjZXB0aW9uIjt9fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAbG9jYXRpb24iO047czo1MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBpc1RlbXBsYXRlU3RhcnQiO2I6MDtzOjQ4OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGlzVGVtcGxhdGVFbmQiO2I6MDt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGFic3RyYWN0IjtiOjA7czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGZpbmFsIjtiOjA7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAHBhcmVudCI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjU0OiJcU3ltZm9ueVxDb21wb25lbnRcVmFsaWRhdG9yXENvbnN0cmFpbnRzXEZpbGVWYWxpZGF0b3IiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czoxMzoiRmlsZVZhbGlkYXRvciI7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBpbXBsZW1lbnRzIjthOjA6e31zOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AY29uc3RhbnRzIjthOjA6e31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AcHJvcGVydGllcyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAG1ldGhvZHMiO2E6MTp7czo2NzoiXFN5bWZvbnlcQ29tcG9uZW50XFZhbGlkYXRvclxDb25zdHJhaW50c1xJbWFnZVZhbGlkYXRvcjo6dmFsaWRhdGUoKSI7TzozNToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QiOjk6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABkb2NCbG9jayI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrIjo3OntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAHN1bW1hcnkiO3M6MTM6IntAaW5oZXJpdGRvY30iO3M6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAZGVzY3JpcHRpb24iO086NDU6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9ja1xEZXNjcmlwdGlvbiI6Mjp7czo1OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9ja1xEZXNjcmlwdGlvbgBib2R5VGVtcGxhdGUiO3M6MDoiIjtzOjUxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXERlc2NyaXB0aW9uAHRhZ3MiO2E6MDp7fX1zOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAHRhZ3MiO2E6MDp7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAY29udGV4dCI7cjozNTtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGxvY2F0aW9uIjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZVN0YXJ0IjtiOjA7czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBpc1RlbXBsYXRlRW5kIjtiOjA7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABmcXNlbiI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjY3OiJcU3ltZm9ueVxDb21wb25lbnRcVmFsaWRhdG9yXENvbnN0cmFpbnRzXEltYWdlVmFsaWRhdG9yOjp2YWxpZGF0ZSgpIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6ODoidmFsaWRhdGUiO31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYWJzdHJhY3QiO2I6MDtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZmluYWwiO2I6MDtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAc3RhdGljIjtiOjA7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHZpc2liaWxpdHkiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eSI6MTp7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eQB2aXNpYmlsaXR5IjtzOjY6InB1YmxpYyI7fXM6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhcmd1bWVudHMiO2E6Mjp7aTowO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQiOjU6e3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AG5hbWUiO3M6NToidmFsdWUiO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AHR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xNaXhlZF8iOjA6e31zOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABkZWZhdWx0IjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGJ5UmVmZXJlbmNlIjtiOjA7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAaXNWYXJpYWRpYyI7YjowO31pOjE7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudCI6NTp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAbmFtZSI7czoxMDoiY29uc3RyYWludCI7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAdHlwZSI7TzozODoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXE9iamVjdF8iOjE6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcT2JqZWN0XwBmcXNlbiI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjM5OiJcU3ltZm9ueVxDb21wb25lbnRcVmFsaWRhdG9yXENvbnN0cmFpbnQiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czoxMDoiQ29uc3RyYWludCI7fX1zOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABkZWZhdWx0IjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGJ5UmVmZXJlbmNlIjtiOjA7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAaXNWYXJpYWRpYyI7YjowO319czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aTozMTtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTowO31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAcmV0dXJuVHlwZSI7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXE1peGVkXyI6MDp7fX19czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAHVzZWRUcmFpdHMiO2E6MDp7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBsb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6MjY7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6MDt9fX1zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e319";