1723816476
waR3U4bTeM%3A5de8b9f62402ea88afb20f05e46c4726-4acc8c3dee650090766d1dadea7c9fc6
s:27008:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxMjp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6IjRhY2M4YzNkZWU2NTAwOTA3NjZkMWRhZGVhN2M5ZmM2IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTg6InNpbXBsZS1waHB1bml0LnBocCI7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBwYXRoIjtzOjUyOiJ2ZW5kb3Ivc3ltZm9ueS9waHB1bml0LWJyaWRnZS9iaW4vc2ltcGxlLXBocHVuaXQucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czoxODM0MzoiPD9waHAKCi8qCiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBTeW1mb255IHBhY2thZ2UuCiAqCiAqIChjKSBGYWJpZW4gUG90ZW5jaWVyIDxmYWJpZW5Ac3ltZm9ueS5jb20+CiAqCiAqIEZvciB0aGUgZnVsbCBjb3B5cmlnaHQgYW5kIGxpY2Vuc2UgaW5mb3JtYXRpb24sIHBsZWFzZSB2aWV3IHRoZSBMSUNFTlNFCiAqIGZpbGUgdGhhdCB3YXMgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHNvdXJjZSBjb2RlLgogKi8KCi8vIFBsZWFzZSB1cGRhdGUgd2hlbiBwaHB1bml0IG5lZWRzIHRvIGJlIHJlaW5zdGFsbGVkIHdpdGggZnJlc2ggZGVwczoKLy8gQ2FjaGUtSWQ6IDIwMjEtMDItMDQgMTE6MDAgVVRDCgppZiAoJ2NsaScgIT09IFxQSFBfU0FQSSAmJiAncGhwZGJnJyAhPT0gXFBIUF9TQVBJKSB7CiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdUaGlzIHNjcmlwdCBtdXN0IGJlIHJ1biBmcm9tIHRoZSBjb21tYW5kIGxpbmUuJyk7Cn0KCmVycm9yX3JlcG9ydGluZygtMSk7CgpnbG9iYWwgJGFyZ3YsICRhcmdjOwokYXJndiA9ICRfU0VSVkVSWydhcmd2J10gPz8gW107CiRhcmdjID0gJF9TRVJWRVJbJ2FyZ2MnXSA/PyAwOwokZ2V0RW52VmFyID0gZnVuY3Rpb24gKCRuYW1lLCAkZGVmYXVsdCA9IGZhbHNlKSB1c2UgKCRhcmd2KSB7CiAgICBpZiAoZmFsc2UgIT09ICR2YWx1ZSA9IGdldGVudigkbmFtZSkpIHsKICAgICAgICByZXR1cm4gJHZhbHVlOwogICAgfQoKICAgIHN0YXRpYyAkcGhwdW5pdENvbmZpZyA9IG51bGw7CiAgICBpZiAobnVsbCA9PT0gJHBocHVuaXRDb25maWcpIHsKICAgICAgICAkcGhwdW5pdENvbmZpZ0ZpbGVuYW1lID0gbnVsbDsKICAgICAgICAkZ2V0UGhwVW5pdENvbmZpZyA9IGZ1bmN0aW9uICgkcHJvYmFibGVDb25maWcpIHVzZSAoJiRnZXRQaHBVbml0Q29uZmlnKSB7CiAgICAgICAgICAgIGlmICghJHByb2JhYmxlQ29uZmlnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNfZGlyKCRwcm9iYWJsZUNvbmZpZykpIHsKICAgICAgICAgICAgICAgIHJldHVybiAkZ2V0UGhwVW5pdENvbmZpZygkcHJvYmFibGVDb25maWcuXERJUkVDVE9SWV9TRVBBUkFUT1IuJ3BocHVuaXQueG1sJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChmaWxlX2V4aXN0cygkcHJvYmFibGVDb25maWcpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJHByb2JhYmxlQ29uZmlnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChmaWxlX2V4aXN0cygkcHJvYmFibGVDb25maWcuJy5kaXN0JykpIHsKICAgICAgICAgICAgICAgIHJldHVybiAkcHJvYmFibGVDb25maWcuJy5kaXN0JzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfTsKCiAgICAgICAgZm9yZWFjaCAoJGFyZ3YgYXMgJGNsaUFyZ3VtZW50SW5kZXggPT4gJGNsaUFyZ3VtZW50KSB7CiAgICAgICAgICAgIGlmICgnLS0nID09PSAkY2xpQXJndW1lbnQpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGxvbmcgb3B0aW9uCiAgICAgICAgICAgIGlmICgnLS1jb25maWd1cmF0aW9uJyA9PT0gJGNsaUFyZ3VtZW50ICYmIGFycmF5X2tleV9leGlzdHMoJGNsaUFyZ3VtZW50SW5kZXggKyAxLCAkYXJndikpIHsKICAgICAgICAgICAgICAgICRwaHB1bml0Q29uZmlnRmlsZW5hbWUgPSAkZ2V0UGhwVW5pdENvbmZpZygkYXJndlskY2xpQXJndW1lbnRJbmRleCArIDFdKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHNob3J0IG9wdGlvbgogICAgICAgICAgICBpZiAoMCA9PT0gc3RycG9zKCRjbGlBcmd1bWVudCwgJy1jJykpIHsKICAgICAgICAgICAgICAgIGlmICgnLWMnID09PSAkY2xpQXJndW1lbnQgJiYgYXJyYXlfa2V5X2V4aXN0cygkY2xpQXJndW1lbnRJbmRleCArIDEsICRhcmd2KSkgewogICAgICAgICAgICAgICAgICAgICRwaHB1bml0Q29uZmlnRmlsZW5hbWUgPSAkZ2V0UGhwVW5pdENvbmZpZygkYXJndlskY2xpQXJndW1lbnRJbmRleCArIDFdKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJHBocHVuaXRDb25maWdGaWxlbmFtZSA9ICRnZXRQaHBVbml0Q29uZmlnKHN1YnN0cigkY2xpQXJndW1lbnQsIDIpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkcGhwdW5pdENvbmZpZ0ZpbGVuYW1lID0gJHBocHVuaXRDb25maWdGaWxlbmFtZSA/OiAkZ2V0UGhwVW5pdENvbmZpZygncGhwdW5pdC54bWwnKTsKCiAgICAgICAgaWYgKCRwaHB1bml0Q29uZmlnRmlsZW5hbWUpIHsKICAgICAgICAgICAgJHBocHVuaXRDb25maWcgPSBuZXcgRE9NRG9jdW1lbnQoKTsKICAgICAgICAgICAgJHBocHVuaXRDb25maWctPmxvYWQoJHBocHVuaXRDb25maWdGaWxlbmFtZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHBocHVuaXRDb25maWcgPSBmYWxzZTsKICAgICAgICB9CiAgICB9CiAgICBpZiAoZmFsc2UgIT09ICRwaHB1bml0Q29uZmlnKSB7CiAgICAgICAgJHZhciA9IG5ldyBET01YUGF0aCgkcGhwdW5pdENvbmZpZyk7CiAgICAgICAgZm9yZWFjaCAoJHZhci0+cXVlcnkoJy8vcGhwL3NlcnZlcltAbmFtZT0iJy4kbmFtZS4nIl0nKSBhcyAkdmFyKSB7CiAgICAgICAgICAgIHJldHVybiAkdmFyLT5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7CiAgICAgICAgfQogICAgICAgIGZvcmVhY2ggKCR2YXItPnF1ZXJ5KCcvL3BocC9lbnZbQG5hbWU9IicuJG5hbWUuJyJdJykgYXMgJHZhcikgewogICAgICAgICAgICByZXR1cm4gJHZhci0+Z2V0QXR0cmlidXRlKCd2YWx1ZScpOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gJGRlZmF1bHQ7Cn07CgokcGFzc3RocnVPckZhaWwgPSBmdW5jdGlvbiAoJGNvbW1hbmQpIHsKICAgIHBhc3N0aHJ1KCRjb21tYW5kLCAkc3RhdHVzKTsKCiAgICBpZiAoJHN0YXR1cykgewogICAgICAgIGV4aXQoJHN0YXR1cyk7CiAgICB9Cn07CgppZiAoXFBIUF9WRVJTSU9OX0lEID49IDgwMDAwKSB7CiAgICAvLyBQSFAgOCByZXF1aXJlcyBQSFBVbml0IDkuMyssIFBIUCA4LjEgcmVxdWlyZXMgUEhQVW5pdCA5LjUrCiAgICAkUEhQVU5JVF9WRVJTSU9OID0gJGdldEVudlZhcignU1lNRk9OWV9QSFBVTklUX1ZFUlNJT04nLCAnOS41JykgPzogJzkuNSc7Cn0gZWxzZWlmIChcUEhQX1ZFUlNJT05fSUQgPj0gNzAyMDApIHsKICAgIC8vIFBIUFVuaXQgOCByZXF1aXJlcyBQSFAgNy4yKwogICAgJFBIUFVOSVRfVkVSU0lPTiA9ICRnZXRFbnZWYXIoJ1NZTUZPTllfUEhQVU5JVF9WRVJTSU9OJywgJzguNScpID86ICc4LjUnOwp9IGVsc2UgewogICAgJFBIUFVOSVRfVkVSU0lPTiA9ICRnZXRFbnZWYXIoJ1NZTUZPTllfUEhQVU5JVF9WRVJTSU9OJywgJzcuNScpID86ICc3LjUnOwp9CgokTUFYX1BIUFVOSVRfVkVSU0lPTiA9ICRnZXRFbnZWYXIoJ1NZTUZPTllfTUFYX1BIUFVOSVRfVkVSU0lPTicsIGZhbHNlKTsKCmlmICgkTUFYX1BIUFVOSVRfVkVSU0lPTiAmJiB2ZXJzaW9uX2NvbXBhcmUoJE1BWF9QSFBVTklUX1ZFUlNJT04sICRQSFBVTklUX1ZFUlNJT04sICc8JykpIHsKICAgICRQSFBVTklUX1ZFUlNJT04gPSAkTUFYX1BIUFVOSVRfVkVSU0lPTjsKfQoKJFBIUFVOSVRfUkVNT1ZFX1JFVFVSTl9UWVBFSElOVCA9IGZpbHRlcl92YXIoJGdldEVudlZhcignU1lNRk9OWV9QSFBVTklUX1JFTU9WRV9SRVRVUk5fVFlQRUhJTlQnLCAnMCcpLCBcRklMVEVSX1ZBTElEQVRFX0JPT0xFQU4pOwoKJENPTVBPU0VSX0pTT04gPSBnZXRlbnYoJ0NPTVBPU0VSJykgPzogJ2NvbXBvc2VyLmpzb24nOwoKJHJvb3QgPSBfX0RJUl9fOwp3aGlsZSAoIWZpbGVfZXhpc3RzKCRyb290LicvJy4kQ09NUE9TRVJfSlNPTikgfHwgZmlsZV9leGlzdHMoJHJvb3QuJy9EZXByZWNhdGlvbkVycm9ySGFuZGxlci5waHAnKSkgewogICAgaWYgKCRyb290ID09PSBkaXJuYW1lKCRyb290KSkgewogICAgICAgIGJyZWFrOwogICAgfQogICAgJHJvb3QgPSBkaXJuYW1lKCRyb290KTsKfQoKJG9sZFB3ZCA9IGdldGN3ZCgpOwokUEhQVU5JVF9ESVIgPSBydHJpbSgkZ2V0RW52VmFyKCdTWU1GT05ZX1BIUFVOSVRfRElSJywgJHJvb3QuJy92ZW5kb3IvYmluLy5waHB1bml0JyksICcvJy5cRElSRUNUT1JZX1NFUEFSQVRPUik7CiRQSFAgPSBkZWZpbmVkKCdQSFBfQklOQVJZJykgPyBcUEhQX0JJTkFSWSA6ICdwaHAnOwokUEhQID0gZXNjYXBlc2hlbGxhcmcoJFBIUCk7CmlmICgncGhwZGJnJyA9PT0gXFBIUF9TQVBJKSB7CiAgICAkUEhQIC49ICcgLXFycic7Cn0KCiRkZWZhdWx0RW52cyA9IFsKICAgICdDT01QT1NFUicgPT4gJ2NvbXBvc2VyLmpzb24nLAogICAgJ0NPTVBPU0VSX1ZFTkRPUl9ESVInID0+ICd2ZW5kb3InLAogICAgJ0NPTVBPU0VSX0JJTl9ESVInID0+ICdiaW4nLAogICAgJ1NZTUZPTllfU0lNUExFX1BIUFVOSVRfQklOX0RJUicgPT4gX19ESVJfXywKXTsKCmZvcmVhY2ggKCRkZWZhdWx0RW52cyBhcyAkZW52TmFtZSA9PiAkZW52VmFsdWUpIHsKICAgIGlmICgkZW52VmFsdWUgIT09IGdldGVudigkZW52TmFtZSkpIHsKICAgICAgICBwdXRlbnYoIiRlbnZOYW1lPSRlbnZWYWx1ZSIpOwogICAgICAgICRfU0VSVkVSWyRlbnZOYW1lXSA9ICRfRU5WWyRlbnZOYW1lXSA9ICRlbnZWYWx1ZTsKICAgIH0KfQoKaWYgKCdkaXNhYmxlZCcgPT09ICRnZXRFbnZWYXIoJ1NZTUZPTllfREVQUkVDQVRJT05TX0hFTFBFUicpKSB7CiAgICBwdXRlbnYoJ1NZTUZPTllfREVQUkVDQVRJT05TX0hFTFBFUj1kaXNhYmxlZCcpOwp9CgppZiAoISRnZXRFbnZWYXIoJ0RPQ1RSSU5FX0RFUFJFQ0FUSU9OUycpKSB7CiAgICBwdXRlbnYoJ0RPQ1RSSU5FX0RFUFJFQ0FUSU9OUz10cmlnZ2VyJyk7CiAgICAkX1NFUlZFUlsnRE9DVFJJTkVfREVQUkVDQVRJT05TJ10gPSAkX0VOVlsnRE9DVFJJTkVfREVQUkVDQVRJT05TJ10gPSAndHJpZ2dlcic7Cn0KCiRDT01QT1NFUiA9ICgkQ09NUE9TRVIgPSBnZXRlbnYoJ0NPTVBPU0VSX0JJTkFSWScpKQogICAgfHwgZmlsZV9leGlzdHMoJENPTVBPU0VSID0gJG9sZFB3ZC4nL2NvbXBvc2VyLnBoYXInKQogICAgfHwgKCRDT01QT1NFUiA9IHJ0cmltKChzdHJpbmcpICgnXFwnID09PSBcRElSRUNUT1JZX1NFUEFSQVRPUiA/IHByZWdfcmVwbGFjZSgnL1tcclxuXS4qLycsICcnLCBzaGVsbF9leGVjKCd3aGVyZS5leGUgY29tcG9zZXIucGhhciAyPiBOVUwnKSkgOiBzaGVsbF9leGVjKCd3aGljaCBjb21wb3Nlci5waGFyIDI+IC9kZXYvbnVsbCcpKSkpCiAgICB8fCAoJENPTVBPU0VSID0gcnRyaW0oKHN0cmluZykgKCdcXCcgPT09IFxESVJFQ1RPUllfU0VQQVJBVE9SID8gcHJlZ19yZXBsYWNlKCcvW1xyXG5dLiovJywgJycsIHNoZWxsX2V4ZWMoJ3doZXJlLmV4ZSBjb21wb3NlciAyPiBOVUwnKSkgOiBzaGVsbF9leGVjKCd3aGljaCBjb21wb3NlciAyPiAvZGV2L251bGwnKSkpKQogICAgfHwgZmlsZV9leGlzdHMoJENPTVBPU0VSID0gcnRyaW0oKHN0cmluZykgKCdcXCcgPT09IFxESVJFQ1RPUllfU0VQQVJBVE9SID8gc2hlbGxfZXhlYygnZ2l0IHJldi1wYXJzZSAtLXNob3ctdG9wbGV2ZWwgMj4gTlVMJykgOiBzaGVsbF9leGVjKCdnaXQgcmV2LXBhcnNlIC0tc2hvdy10b3BsZXZlbCAyPiAvZGV2L251bGwnKSkpLlxESVJFQ1RPUllfU0VQQVJBVE9SLidjb21wb3Nlci5waGFyJykKICAgID8gKCcjIS91c3IvYmluL2VudiBwaHAnID09PSBmaWxlX2dldF9jb250ZW50cygkQ09NUE9TRVIsIGZhbHNlLCBudWxsLCAwLCAxOCkgPyAkUEhQIDogJycpLicgJy5lc2NhcGVzaGVsbGFyZygkQ09NUE9TRVIpIC8vIGRldGVjdCBzaGVsbCB3cmFwcGVycyBieSBsb29raW5nIGF0IHRoZSBzaGViYW5nCiAgICA6ICdjb21wb3Nlcic7CgokcHJldkNhY2hlRGlyID0gZ2V0ZW52KCdDT01QT1NFUl9DQUNIRV9ESVInKTsKaWYgKCRwcmV2Q2FjaGVEaXIpIHsKICAgIGlmIChmYWxzZSA9PT0gJGFic29sdXRlQ2FjaGVEaXIgPSByZWFscGF0aCgkcHJldkNhY2hlRGlyKSkgewogICAgICAgIEBta2RpcigkcHJldkNhY2hlRGlyLCAwNzc3LCB0cnVlKTsKICAgICAgICAkYWJzb2x1dGVDYWNoZURpciA9IHJlYWxwYXRoKCRwcmV2Q2FjaGVEaXIpOwogICAgfQogICAgaWYgKCRhYnNvbHV0ZUNhY2hlRGlyKSB7CiAgICAgICAgcHV0ZW52KCJDT01QT1NFUl9DQUNIRV9ESVI9JGFic29sdXRlQ2FjaGVEaXIiKTsKICAgIH0gZWxzZSB7CiAgICAgICAgJHByZXZDYWNoZURpciA9IGZhbHNlOwogICAgfQp9CiRTWU1GT05ZX1BIUFVOSVRfUkVNT1ZFID0gJGdldEVudlZhcignU1lNRk9OWV9QSFBVTklUX1JFTU9WRScsICdwaHBzcGVjL3Byb3BoZWN5Jy4oJFBIUFVOSVRfVkVSU0lPTiA8IDYuMCA/ICcgc3ltZm9ueS95YW1sJyA6ICcnKSk7CiRTWU1GT05ZX1BIUFVOSVRfUkVRVUlSRSA9ICRnZXRFbnZWYXIoJ1NZTUZPTllfUEhQVU5JVF9SRVFVSVJFJywgJycpOwokY29uZmlndXJhdGlvbkhhc2ggPSBtZDUoaW1wbG9kZShcUEhQX0VPTCwgW21kNV9maWxlKF9fRklMRV9fKSwgJFNZTUZPTllfUEhQVU5JVF9SRU1PVkUsICRTWU1GT05ZX1BIUFVOSVRfUkVRVUlSRSwgKGludCkgJFBIUFVOSVRfUkVNT1ZFX1JFVFVSTl9UWVBFSElOVF0pKTsKJFBIUFVOSVRfVkVSU0lPTl9ESVIgPSBzcHJpbnRmKCdwaHB1bml0LSVzLSVkJywgJFBIUFVOSVRfVkVSU0lPTiwgJFBIUFVOSVRfUkVNT1ZFX1JFVFVSTl9UWVBFSElOVCk7CmlmICghZmlsZV9leGlzdHMoIiRQSFBVTklUX0RJUi8kUEhQVU5JVF9WRVJTSU9OX0RJUi9waHB1bml0IikgfHwgJGNvbmZpZ3VyYXRpb25IYXNoICE9PSBAZmlsZV9nZXRfY29udGVudHMoIiRQSFBVTklUX0RJUi8uJFBIUFVOSVRfVkVSU0lPTl9ESVIubWQ1IikpIHsKICAgIC8vIEJ1aWxkIGEgc3RhbmRhbG9uZSBwaHB1bml0IHdpdGhvdXQgc3ltZm9ueS95YW1sIG5vciBwcm9waGVjeSBieSBkZWZhdWx0CgogICAgQG1rZGlyKCRQSFBVTklUX0RJUiwgMDc3NywgdHJ1ZSk7CiAgICBjaGRpcigkUEhQVU5JVF9ESVIpOwogICAgaWYgKGZpbGVfZXhpc3RzKCIkUEhQVU5JVF9WRVJTSU9OX0RJUiIpKSB7CiAgICAgICAgcGFzc3RocnUoc3ByaW50ZignXFwnID09PSBcRElSRUNUT1JZX1NFUEFSQVRPUiA/ICdybWRpciAvUyAvUSAlcyAyPiBOVUwnIDogJ3JtIC1yZiAlcycsIGVzY2FwZXNoZWxsYXJnKCIkUEhQVU5JVF9WRVJTSU9OX0RJUi5vbGQiKSkpOwogICAgICAgIHJlbmFtZSgiJFBIUFVOSVRfVkVSU0lPTl9ESVIiLCAiJFBIUFVOSVRfVkVSU0lPTl9ESVIub2xkIik7CiAgICAgICAgcGFzc3RocnUoc3ByaW50ZignXFwnID09PSBcRElSRUNUT1JZX1NFUEFSQVRPUiA/ICdybWRpciAvUyAvUSAlcycgOiAncm0gLXJmICVzJywgZXNjYXBlc2hlbGxhcmcoIiRQSFBVTklUX1ZFUlNJT05fRElSLm9sZCIpKSk7CiAgICB9CgogICAgJGluZm8gPSBbXTsKICAgIGZvcmVhY2ggKGV4cGxvZGUoIlxuIiwgYCRDT01QT1NFUiBpbmZvIC0tbm8tYW5zaSAtYSAtbiBwaHB1bml0L3BocHVuaXQgIiRQSFBVTklUX1ZFUlNJT04uKiJgKSBhcyAkbGluZSkgewogICAgICAgICRsaW5lID0gcnRyaW0oJGxpbmUpOwoKICAgICAgICBpZiAoISRpbmZvICYmIHByZWdfbWF0Y2goJy9edmVyc2lvbnMgKzogLycsICRsaW5lKSkgewogICAgICAgICAgICAkaW5mb1sndmVyc2lvbnMnXSA9IGV4cGxvZGUoJywgJywgbHRyaW0oc3Vic3RyKCRsaW5lLCA5KSwgJzogJykpOwogICAgICAgIH0gZWxzZWlmIChpc3NldCgkaW5mb1sncmVxdWlyZXMnXSkpIHsKICAgICAgICAgICAgaWYgKCcnID09PSAkbGluZSkgewogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRsaW5lID0gZXhwbG9kZSgnICcsICRsaW5lLCAyKTsKICAgICAgICAgICAgJGluZm9bJ3JlcXVpcmVzJ11bJGxpbmVbMF1dID0gJGxpbmVbMV07CiAgICAgICAgfSBlbHNlaWYgKCRpbmZvICYmICdyZXF1aXJlcycgPT09ICRsaW5lKSB7CiAgICAgICAgICAgICRpbmZvWydyZXF1aXJlcyddID0gW107CiAgICAgICAgfQogICAgfQoKICAgIGlmIChpbl9hcnJheSgnLS1jb2xvcnM9bmV2ZXInLCAkYXJndiwgdHJ1ZSkgfHwgKGlzc2V0KCRhcmd2WyRpID0gYXJyYXlfc2VhcmNoKCduZXZlcicsICRhcmd2LCB0cnVlKSAtIDFdKSAmJiAnLS1jb2xvcnMnID09PSAkYXJndlskaV0pKSB7CiAgICAgICAgJENPTVBPU0VSIC49ICcgLS1uby1hbnNpJzsKICAgIH0gZWxzZSB7CiAgICAgICAgJENPTVBPU0VSIC49ICcgLS1hbnNpJzsKICAgIH0KCiAgICAkaW5mbyArPSBbCiAgICAgICAgJ3ZlcnNpb25zJyA9PiBbXSwKICAgICAgICAncmVxdWlyZXMnID0+IFsncGhwJyA9PiAnKiddLAogICAgXTsKCiAgICAkc3RhYmxlVmVyc2lvbnMgPSBhcnJheV9maWx0ZXIoJGluZm9bJ3ZlcnNpb25zJ10sIGZ1bmN0aW9uICgkdikgewogICAgICAgIHJldHVybiAhcHJlZ19tYXRjaCgnLy1kZXYkfF5kZXYtLycsICR2KTsKICAgIH0pOwoKICAgIGlmICghJHN0YWJsZVZlcnNpb25zKSB7CiAgICAgICAgJHBhc3N0aHJ1T3JGYWlsKCIkQ09NUE9TRVIgY3JlYXRlLXByb2plY3QgLS1pZ25vcmUtcGxhdGZvcm0tcmVxcyAtLW5vLWluc3RhbGwgLS1wcmVmZXItZGlzdCAtLW5vLXNjcmlwdHMgLS1uby1wbHVnaW5zIC0tbm8tcHJvZ3Jlc3MgLXMgZGV2IHBocHVuaXQvcGhwdW5pdCAkUEhQVU5JVF9WRVJTSU9OX0RJUiBcIiRQSFBVTklUX1ZFUlNJT04uKlwiIik7CiAgICB9IGVsc2UgewogICAgICAgICRwYXNzdGhydU9yRmFpbCgiJENPTVBPU0VSIGNyZWF0ZS1wcm9qZWN0IC0taWdub3JlLXBsYXRmb3JtLXJlcXMgLS1uby1pbnN0YWxsIC0tcHJlZmVyLWRpc3QgLS1uby1zY3JpcHRzIC0tbm8tcGx1Z2lucyAtLW5vLXByb2dyZXNzIHBocHVuaXQvcGhwdW5pdCAkUEhQVU5JVF9WRVJTSU9OX0RJUiBcIiRQSFBVTklUX1ZFUlNJT04uKlwiIik7CiAgICB9CgogICAgQGNvcHkoIiRQSFBVTklUX1ZFUlNJT05fRElSL3BocHVuaXQueHNkIiwgJ3BocHVuaXQueHNkJyk7CiAgICBjaGRpcigiJFBIUFVOSVRfVkVSU0lPTl9ESVIiKTsKICAgIGlmICgkU1lNRk9OWV9QSFBVTklUX1JFTU9WRSkgewogICAgICAgICRwYXNzdGhydU9yRmFpbCgiJENPTVBPU0VSIHJlbW92ZSAtLW5vLXVwZGF0ZSAtLW5vLWludGVyYWN0aW9uICIuJFNZTUZPTllfUEhQVU5JVF9SRU1PVkUpOwogICAgfQogICAgaWYgKCRTWU1GT05ZX1BIUFVOSVRfUkVRVUlSRSkgewogICAgICAgICRwYXNzdGhydU9yRmFpbCgiJENPTVBPU0VSIHJlcXVpcmUgLS1uby11cGRhdGUgLS1uby1pbnRlcmFjdGlvbiAiLiRTWU1GT05ZX1BIUFVOSVRfUkVRVUlSRSk7CiAgICB9CiAgICBpZiAoNS4xIDw9ICRQSFBVTklUX1ZFUlNJT04gJiYgJFBIUFVOSVRfVkVSU0lPTiA8IDUuNCkgewogICAgICAgICRwYXNzdGhydU9yRmFpbCgiJENPTVBPU0VSIHJlcXVpcmUgLS1uby11cGRhdGUgcGhwdW5pdC9waHB1bml0LW1vY2stb2JqZWN0cyBcIn4zLjEuMFwiIik7CiAgICB9CgogICAgaWYgKHByZWdfbWF0Y2goJ3tcXigoXGQrK1wuKVxkKyspW1xkXC5dKiR9JywgJGluZm9bJ3JlcXVpcmVzJ11bJ3BocCddLCAkcGhwVmVyc2lvbikgJiYgdmVyc2lvbl9jb21wYXJlKCRwaHBWZXJzaW9uWzJdLic5OScsIFxQSFBfVkVSU0lPTiwgJzwnKSkgewogICAgICAgICRwYXNzdGhydU9yRmFpbCgiJENPTVBPU0VSIGNvbmZpZyBwbGF0Zm9ybS5waHAgXCIkcGhwVmVyc2lvblsxXS45OVwiIik7CiAgICB9IGVsc2UgewogICAgICAgICRwYXNzdGhydU9yRmFpbCgiJENPTVBPU0VSIGNvbmZpZyAtLXVuc2V0IHBsYXRmb3JtLnBocCIpOwogICAgfQogICAgaWYgKGZpbGVfZXhpc3RzKCRwYXRoID0gJHJvb3QuJy92ZW5kb3Ivc3ltZm9ueS9waHB1bml0LWJyaWRnZScpKSB7CiAgICAgICAgJGhheXN0YWNrID0gIiRQSFBVTklUX0RJUi8kUEhQVU5JVF9WRVJTSU9OX0RJUiI7CiAgICAgICAgJHJvb3RMZW4gPSBzdHJsZW4oJHJvb3QpOwoKICAgICAgICAkcCA9ICgkcm9vdExlbiA8PSBzdHJsZW4oJGhheXN0YWNrKSA/IHN0cl9yZXBlYXQoJy4uLycsIHN1YnN0cl9jb3VudCgkaGF5c3RhY2ssICcvJywgJHJvb3RMZW4pKSA6ICcnKS4ndmVuZG9yL3N5bWZvbnkvcGhwdW5pdC1icmlkZ2UnOwogICAgICAgIGlmIChyZWFscGF0aCgkcCkgPT09IHJlYWxwYXRoKCRwYXRoKSkgewogICAgICAgICAgICAkcGF0aCA9ICRwOwogICAgICAgIH0KICAgICAgICAkcGFzc3RocnVPckZhaWwoIiRDT01QT1NFUiByZXF1aXJlIC0tbm8tdXBkYXRlIHN5bWZvbnkvcGhwdW5pdC1icmlkZ2UgXCIqQGRldlwiIik7CiAgICAgICAgJHBhc3N0aHJ1T3JGYWlsKCIkQ09NUE9TRVIgY29uZmlnIHJlcG9zaXRvcmllcy5waHB1bml0LWJyaWRnZSBwYXRoICIuZXNjYXBlc2hlbGxhcmcoc3RyX3JlcGxhY2UoJy8nLCBcRElSRUNUT1JZX1NFUEFSQVRPUiwgJHBhdGgpKSk7CiAgICAgICAgaWYgKCdcXCcgPT09IFxESVJFQ1RPUllfU0VQQVJBVE9SKSB7CiAgICAgICAgICAgIGZpbGVfcHV0X2NvbnRlbnRzKCdjb21wb3Nlci5qc29uJywgcHJlZ19yZXBsYWNlKCcvXiggezh9KSJwaHB1bml0LWJyaWRnZSI6IFx7JC9tJywgIiQwXG4kMSAgICAiLicib3B0aW9ucyI6IHsic3ltbGluayI6IGZhbHNlfSwnLCBmaWxlX2dldF9jb250ZW50cygnY29tcG9zZXIuanNvbicpKSk7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICAkcGFzc3RocnVPckZhaWwoIiRDT01QT1NFUiByZXF1aXJlIC0tbm8tdXBkYXRlIHN5bWZvbnkvcGhwdW5pdC1icmlkZ2UgXCIqXCIiKTsKICAgIH0KICAgICRwcmV2Um9vdCA9IGdldGVudignQ09NUE9TRVJfUk9PVF9WRVJTSU9OJyk7CiAgICBwdXRlbnYoIkNPTVBPU0VSX1JPT1RfVkVSU0lPTj0kUEhQVU5JVF9WRVJTSU9OLjk5Iik7CiAgICAkcSA9ICdcXCcgPT09IFxESVJFQ1RPUllfU0VQQVJBVE9SICYmIFxQSFBfVkVSU0lPTl9JRCA8IDgwMDAwID8gJyInIDogJyc7CiAgICAvLyAtLW5vLXN1Z2dlc3QgaXMgbm90IGluIHRoZSBsaXN0IHRvIGtlZXAgY29tcGF0IHdpdGggY29tcG9zZXIgMS4wLCB3aGljaCBpcyBzaGlwcGVkIHdpdGggVWJ1bnR1IDE2LjA0TFRTCiAgICAkZXhpdCA9IHByb2NfY2xvc2UocHJvY19vcGVuKCIkcSRDT01QT1NFUiBpbnN0YWxsIC0tbm8tZGV2IC0tcHJlZmVyLWRpc3QgLS1uby1wcm9ncmVzcyAkcSIsIFtdLCAkcCwgZ2V0Y3dkKCkpKTsKICAgIHB1dGVudignQ09NUE9TRVJfUk9PVF9WRVJTSU9OJy4oZmFsc2UgIT09ICRwcmV2Um9vdCA/ICc9Jy4kcHJldlJvb3QgOiAnJykpOwogICAgaWYgKCRwcmV2Q2FjaGVEaXIpIHsKICAgICAgICBwdXRlbnYoIkNPTVBPU0VSX0NBQ0hFX0RJUj0kcHJldkNhY2hlRGlyIik7CiAgICB9CiAgICBpZiAoJGV4aXQpIHsKICAgICAgICBleGl0KCRleGl0KTsKICAgIH0KCiAgICAvLyBNdXRhdGUgVGVzdENhc2UgY29kZQogICAgJGFsdGVyZWRDb2RlID0gZmlsZV9nZXRfY29udGVudHMoJGFsdGVyZWRGaWxlID0gJy4vc3JjL0ZyYW1ld29yay9UZXN0Q2FzZS5waHAnKTsKICAgIGlmICgkUEhQVU5JVF9SRU1PVkVfUkVUVVJOX1RZUEVISU5UKSB7CiAgICAgICAgJGFsdGVyZWRDb2RlID0gcHJlZ19yZXBsYWNlKCcvXiAgICAoKD86cHJvdGVjdGVkfHB1YmxpYykoPzogc3RhdGljKT8gZnVuY3Rpb24gXHcrXChcKSk6IHZvaWQvbScsICcgICAgJDEnLCAkYWx0ZXJlZENvZGUpOwogICAgfQogICAgJGFsdGVyZWRDb2RlID0gcHJlZ19yZXBsYWNlKCcvYWJzdHJhY3QgY2xhc3MgVGVzdENhc2VbXlx7XStcey8nLCAnJDAgJy5cUEhQX0VPTC4iICAgIHVzZSBcU3ltZm9ueVxCcmlkZ2VcUGhwVW5pdFxMZWdhY3lcUG9seWZpbGxUZXN0Q2FzZVRyYWl0OyIsICRhbHRlcmVkQ29kZSwgMSk7CiAgICBmaWxlX3B1dF9jb250ZW50cygkYWx0ZXJlZEZpbGUsICRhbHRlcmVkQ29kZSk7CgogICAgLy8gTXV0YXRlIEFzc2VydCBjb2RlCiAgICAkYWx0ZXJlZENvZGUgPSBmaWxlX2dldF9jb250ZW50cygkYWx0ZXJlZEZpbGUgPSAnLi9zcmMvRnJhbWV3b3JrL0Fzc2VydC5waHAnKTsKICAgICRhbHRlcmVkQ29kZSA9IHByZWdfcmVwbGFjZSgnL2Fic3RyYWN0IGNsYXNzIEFzc2VydFteXHtdK1x7LycsICckMCAnLlxQSFBfRU9MLiIgICAgdXNlIFxTeW1mb255XEJyaWRnZVxQaHBVbml0XExlZ2FjeVxQb2x5ZmlsbEFzc2VydFRyYWl0OyIsICRhbHRlcmVkQ29kZSwgMSk7CiAgICBmaWxlX3B1dF9jb250ZW50cygkYWx0ZXJlZEZpbGUsICRhbHRlcmVkQ29kZSk7CgogICAgZmlsZV9wdXRfY29udGVudHMoJ3BocHVuaXQnLCA8PDwnRU9QSFAnCjw/cGhwCgpkZWZpbmUoJ1BIUFVOSVRfQ09NUE9TRVJfSU5TVEFMTCcsIF9fRElSX18uJy92ZW5kb3IvYXV0b2xvYWQucGhwJyk7CnJlcXVpcmUgUEhQVU5JVF9DT01QT1NFUl9JTlNUQUxMOwoKaWYgKCFjbGFzc19leGlzdHMoXFN5bWZvbnlFeGNsdWRlTGlzdFBocHVuaXQ6OmNsYXNzLCBmYWxzZSkpIHsKICAgIGNsYXNzIFN5bWZvbnlFeGNsdWRlTGlzdFBocHVuaXQge30KfQppZiAobWV0aG9kX2V4aXN0cyhcUEhQVW5pdFxVdGlsXEV4Y2x1ZGVMaXN0OjpjbGFzcywgJ2FkZERpcmVjdG9yeScpKSB7CiAgICAobmV3IFBIUFVuaXRcVXRpbFxFeGNsdWRlbGlzdCgpKS0+Z2V0RXhjbHVkZWREaXJlY3RvcmllcygpOwogICAgUEhQVW5pdFxVdGlsXEV4Y2x1ZGVMaXN0OjphZGREaXJlY3RvcnkoXGRpcm5hbWUoKG5ldyBcUmVmbGVjdGlvbkNsYXNzKFxTeW1mb255RXhjbHVkZUxpc3RQaHB1bml0OjpjbGFzcykpLT5nZXRGaWxlTmFtZSgpKSk7CiAgICBjbGFzc19leGlzdHMoXFN5bWZvbnlFeGNsdWRlTGlzdFNpbXBsZVBocHVuaXQ6OmNsYXNzLCBmYWxzZSkgJiYgUEhQVW5pdFxVdGlsXEV4Y2x1ZGVMaXN0OjphZGREaXJlY3RvcnkoXGRpcm5hbWUoKG5ldyBcUmVmbGVjdGlvbkNsYXNzKFxTeW1mb255RXhjbHVkZUxpc3RTaW1wbGVQaHB1bml0OjpjbGFzcykpLT5nZXRGaWxlTmFtZSgpKSk7Cn0gZWxzZWlmIChtZXRob2RfZXhpc3RzKFxQSFBVbml0XFV0aWxcQmxhY2tsaXN0OjpjbGFzcywgJ2FkZERpcmVjdG9yeScpKSB7CiAgICAobmV3IFBIUFVuaXRcVXRpbFxCbGFja0xpc3QoKSktPmdldEJsYWNrbGlzdGVkRGlyZWN0b3JpZXMoKTsKICAgIFBIUFVuaXRcVXRpbFxCbGFja2xpc3Q6OmFkZERpcmVjdG9yeShcZGlybmFtZSgobmV3IFxSZWZsZWN0aW9uQ2xhc3MoXFN5bWZvbnlFeGNsdWRlTGlzdFBocHVuaXQ6OmNsYXNzKSktPmdldEZpbGVOYW1lKCkpKTsKICAgIGNsYXNzX2V4aXN0cyhcU3ltZm9ueUV4Y2x1ZGVMaXN0U2ltcGxlUGhwdW5pdDo6Y2xhc3MsIGZhbHNlKSAmJiBQSFBVbml0XFV0aWxcQmxhY2tsaXN0OjphZGREaXJlY3RvcnkoXGRpcm5hbWUoKG5ldyBcUmVmbGVjdGlvbkNsYXNzKFxTeW1mb255RXhjbHVkZUxpc3RTaW1wbGVQaHB1bml0OjpjbGFzcykpLT5nZXRGaWxlTmFtZSgpKSk7Cn0gZWxzZSB7CiAgICBQSFBVbml0XFV0aWxcQmxhY2tsaXN0OjokYmxhY2tsaXN0ZWRDbGFzc05hbWVzWydTeW1mb255RXhjbHVkZUxpc3RQaHB1bml0J10gPSAxOwogICAgUEhQVW5pdFxVdGlsXEJsYWNrbGlzdDo6JGJsYWNrbGlzdGVkQ2xhc3NOYW1lc1snU3ltZm9ueUV4Y2x1ZGVMaXN0U2ltcGxlUGhwdW5pdCddID0gMTsKfQoKU3ltZm9ueVxCcmlkZ2VcUGhwVW5pdFxUZXh0VUlcQ29tbWFuZDo6bWFpbigpOwoKRU9QSFAKICAgICk7CiAgICBjaGRpcignLi4nKTsKICAgIGZpbGVfcHV0X2NvbnRlbnRzKCIuJFBIUFVOSVRfVkVSU0lPTl9ESVIubWQ1IiwgJGNvbmZpZ3VyYXRpb25IYXNoKTsKICAgIGNoZGlyKCRvbGRQd2QpOwp9CgovLyBDcmVhdGUgYSBzeW1saW5rIHdpdGggYSBwcmVkaWN0YWJsZSBwYXRoIHBvaW50aW5nIHRvIHRoZSBjdXJyZW50bHkgdXNlZCB2ZXJzaW9uLgovLyBUaGlzIGlzIHVzZWZ1bCBmb3Igc3RhdGljIGFuYWx5dGljcyB0b29scyBzdWNoIGFzIFBIUFN0YW4gaGF2aW5nIHRvIGxvYWQgUEhQVW5pdCdzIGNsYXNzZXMKLy8gYW5kIGZvciBvdGhlciB0ZXN0aW5nIGxpYnJhcmllcyBzdWNoIGFzIEJlaGF0IHVzaW5nIFBIUFVuaXQncyBhc3NlcnRpb25zLgpjaGRpcigkUEhQVU5JVF9ESVIpOwppZiAoJ1xcJyA9PT0gXERJUkVDVE9SWV9TRVBBUkFUT1IpIHsKICAgIHBhc3N0aHJ1KCdybWRpciAvUyAvUSBwaHB1bml0IDI+IE5VTCcpOwogICAgcGFzc3RocnUoc3ByaW50ZignbWtsaW5rIC9qIHBocHVuaXQgJXMgPiBOVUwgMj4mMScsIGVzY2FwZXNoZWxsYXJnKCRQSFBVTklUX1ZFUlNJT05fRElSKSkpOwp9IGVsc2UgewogICAgaWYgKGZpbGVfZXhpc3RzKCdwaHB1bml0JykpIHsKICAgICAgICBAdW5saW5rKCdwaHB1bml0Jyk7CiAgICB9CiAgICBAc3ltbGluaygkUEhQVU5JVF9WRVJTSU9OX0RJUiwgJ3BocHVuaXQnKTsKfQpjaGRpcigkb2xkUHdkKTsKCmlmICgkUEhQVU5JVF9WRVJTSU9OIDwgOC4wKSB7CiAgICAkYXJndiA9IGFycmF5X2ZpbHRlcigkYXJndiwgZnVuY3Rpb24gKCR2KSB1c2UgKCYkYXJnYykgewogICAgICAgIGlmICgnLS1kby1ub3QtY2FjaGUtcmVzdWx0JyAhPT0gJHYpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIC0tJGFyZ2M7CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwp9IGVsc2VpZiAoZmlsdGVyX3ZhcihnZXRlbnYoJ1NZTUZPTllfUEhQVU5JVF9ESVNBQkxFX1JFU1VMVF9DQUNIRScpLCBcRklMVEVSX1ZBTElEQVRFX0JPT0xFQU4pKSB7CiAgICAkYXJndltdID0gJy0tZG8tbm90LWNhY2hlLXJlc3VsdCc7CiAgICArKyRhcmdjOwp9CgokY29tcG9uZW50cyA9IFtdOwokY21kID0gYXJyYXlfbWFwKCdlc2NhcGVzaGVsbGFyZycsICRhcmd2KTsKJGV4aXQgPSAwOwoKaWYgKGlzc2V0KCRhcmd2WzFdKSAmJiAnc3ltZm9ueScgPT09ICRhcmd2WzFdICYmICFmaWxlX2V4aXN0cygnc3ltZm9ueScpICYmIGZpbGVfZXhpc3RzKCdzcmMvU3ltZm9ueScpKSB7CiAgICAkYXJndlsxXSA9ICdzcmMvU3ltZm9ueSc7Cn0KaWYgKGlzc2V0KCRhcmd2WzFdKSAmJiBpc19kaXIoJGFyZ3ZbMV0pICYmICFmaWxlX2V4aXN0cygkYXJndlsxXS4nL3BocHVuaXQueG1sLmRpc3QnKSkgewogICAgLy8gRmluZCBTeW1mb255IGNvbXBvbmVudHMgaW4gcGxhaW4gcGhwIGZvciBXaW5kb3dzIHBvcnRhYmlsaXR5CgogICAgJGZpbmRlciA9IG5ldyBSZWN1cnNpdmVEaXJlY3RvcnlJdGVyYXRvcigkYXJndlsxXSwgRmlsZXN5c3RlbUl0ZXJhdG9yOjpLRVlfQVNfRklMRU5BTUUgfCBGaWxlc3lzdGVtSXRlcmF0b3I6OlVOSVhfUEFUSFMpOwogICAgJGZpbmRlciA9IG5ldyBSZWN1cnNpdmVJdGVyYXRvckl0ZXJhdG9yKCRmaW5kZXIpOwogICAgJGZpbmRlci0+c2V0TWF4RGVwdGgoZ2V0ZW52KCdTWU1GT05ZX1BIUFVOSVRfTUFYX0RFUFRIJykgPzogMyk7CgogICAgZm9yZWFjaCAoJGZpbmRlciBhcyAkZmlsZSA9PiAkZmlsZUluZm8pIHsKICAgICAgICBpZiAoJ3BocHVuaXQueG1sLmRpc3QnID09PSAkZmlsZSkgewogICAgICAgICAgICAkY29tcG9uZW50c1tdID0gZGlybmFtZSgkZmlsZUluZm8tPmdldFBhdGhuYW1lKCkpOwogICAgICAgIH0KICAgIH0KICAgIGlmICgkY29tcG9uZW50cykgewogICAgICAgIGFycmF5X3NoaWZ0KCRjbWQpOwogICAgfQp9CgokY21kWzBdID0gc3ByaW50ZignJXMgJXMgLS1jb2xvcnM9YWx3YXlzJywgJFBIUCwgZXNjYXBlc2hlbGxhcmcoIiRQSFBVTklUX0RJUi8kUEhQVU5JVF9WRVJTSU9OX0RJUi9waHB1bml0IikpOwokY21kID0gc3RyX3JlcGxhY2UoJyUnLCAnJSUnLCBpbXBsb2RlKCcgJywgJGNtZCkpLicgJTEkcyc7CgppZiAoJ1xcJyA9PT0gXERJUkVDVE9SWV9TRVBBUkFUT1IpIHsKICAgICRjbWQgPSAnY21kIC92Om9uIC9kIC9jICIoJy4kY21kLicpJTIkcyInOwp9IGVsc2UgewogICAgJGNtZCAuPSAnJTIkcyc7Cn0KCmlmICgkY29tcG9uZW50cykgewogICAgJHNraXBwZWRUZXN0cyA9ICRfU0VSVkVSWydTWU1GT05ZX1BIUFVOSVRfU0tJUFBFRF9URVNUUyddID8/IGZhbHNlOwogICAgJHJ1bm5pbmdQcm9jcyA9IFtdOwoKICAgIGZvcmVhY2ggKCRjb21wb25lbnRzIGFzICRjb21wb25lbnQpIHsKICAgICAgICAvLyBSdW4gcGhwdW5pdCB0ZXN0cyBpbiBwYXJhbGxlbAoKICAgICAgICBpZiAoJHNraXBwZWRUZXN0cykgewogICAgICAgICAgICBwdXRlbnYoIlNZTUZPTllfUEhQVU5JVF9TS0lQUEVEX1RFU1RTPSRjb21wb25lbnQvJHNraXBwZWRUZXN0cyIpOwogICAgICAgIH0KCiAgICAgICAgJGMgPSBlc2NhcGVzaGVsbGFyZygkY29tcG9uZW50KTsKCiAgICAgICAgaWYgKCRwcm9jID0gcHJvY19vcGVuKHNwcmludGYoJGNtZCwgJGMsICIgPiAkYy9waHB1bml0LnN0ZG91dCAyPiAkYy9waHB1bml0LnN0ZGVyciIpLCBbXSwgJHBpcGVzKSkgewogICAgICAgICAgICAkcnVubmluZ1Byb2NzWyRjb21wb25lbnRdID0gJHByb2M7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJGV4aXQgPSAxOwogICAgICAgICAgICBlY2hvICJcMDMzWzQxbUtPXDAzM1swbSAkY29tcG9uZW50XG5cbiI7CiAgICAgICAgfQogICAgfQoKICAgIHdoaWxlICgkcnVubmluZ1Byb2NzKSB7CiAgICAgICAgdXNsZWVwKDMwMDAwMCk7CiAgICAgICAgJHRlcm1pbmF0ZWRQcm9jcyA9IFtdOwogICAgICAgIGZvcmVhY2ggKCRydW5uaW5nUHJvY3MgYXMgJGNvbXBvbmVudCA9PiAkcHJvYykgewogICAgICAgICAgICAkcHJvY1N0YXR1cyA9IHByb2NfZ2V0X3N0YXR1cygkcHJvYyk7CiAgICAgICAgICAgIGlmICghJHByb2NTdGF0dXNbJ3J1bm5pbmcnXSkgewogICAgICAgICAgICAgICAgJHRlcm1pbmF0ZWRQcm9jc1skY29tcG9uZW50XSA9ICRwcm9jU3RhdHVzWydleGl0Y29kZSddOwogICAgICAgICAgICAgICAgdW5zZXQoJHJ1bm5pbmdQcm9jc1skY29tcG9uZW50XSk7CiAgICAgICAgICAgICAgICBwcm9jX2Nsb3NlKCRwcm9jKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZm9yZWFjaCAoJHRlcm1pbmF0ZWRQcm9jcyBhcyAkY29tcG9uZW50ID0+ICRwcm9jU3RhdHVzKSB7CiAgICAgICAgICAgIGZvcmVhY2ggKFsnb3V0JywgJ2VyciddIGFzICRmaWxlKSB7CiAgICAgICAgICAgICAgICAkZmlsZSA9ICIkY29tcG9uZW50L3BocHVuaXQuc3RkJGZpbGUiOwogICAgICAgICAgICAgICAgcmVhZGZpbGUoJGZpbGUpOwogICAgICAgICAgICAgICAgdW5saW5rKCRmaWxlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gRmFpbCBvbiBhbnkgaW5kaXZpZHVhbCBjb21wb25lbnQgZmFpbHVyZXMgYnV0IGlnbm9yZSBzb21lIGVycm9yIGNvZGVzIG9uIFdpbmRvd3Mgd2hlbiBBUEN1IGlzIGVuYWJsZWQ6CiAgICAgICAgICAgIC8vIFNUQVRVU19TVEFDS19CVUZGRVJfT1ZFUlJVTiAoLTEwNzM3NDA3OTEvMHhDMDAwMDQwOSkKICAgICAgICAgICAgLy8gU1RBVFVTX0FDQ0VTU19WSU9MQVRJT04gKC0xMDczNzQxODE5LzB4QzAwMDAwMDUpCiAgICAgICAgICAgIC8vIFNUQVRVU19IRUFQX0NPUlJVUFRJT04gKC0xMDczNzQwOTQwLzB4QzAwMDAzNzQpCiAgICAgICAgICAgIGlmICgkcHJvY1N0YXR1cyAmJiAoJ1xcJyAhPT0gXERJUkVDVE9SWV9TRVBBUkFUT1IgfHwgIWV4dGVuc2lvbl9sb2FkZWQoJ2FwY3UnKSB8fCAhZmlsdGVyX3ZhcihpbmlfZ2V0KCdhcGMuZW5hYmxlX2NsaScpLCBcRklMVEVSX1ZBTElEQVRFX0JPT0xFQU4pIHx8ICFpbl9hcnJheSgkcHJvY1N0YXR1cywgWy0xMDczNzQwNzkxLCAtMTA3Mzc0MTgxOSwgLTEwNzM3NDA5NDBdKSkpIHsKICAgICAgICAgICAgICAgICRleGl0ID0gJHByb2NTdGF0dXM7CiAgICAgICAgICAgICAgICBlY2hvICJcMDMzWzQxbUtPXDAzM1swbSAkY29tcG9uZW50XG5cbiI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlY2hvICJcMDMzWzMybU9LXDAzM1swbSAkY29tcG9uZW50XG5cbiI7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0gZWxzZWlmICghaXNzZXQoJGFyZ3ZbMV0pIHx8ICdpbnN0YWxsJyAhPT0gJGFyZ3ZbMV0gfHwgZmlsZV9leGlzdHMoJ2luc3RhbGwnKSkgewogICAgaWYgKCFjbGFzc19leGlzdHMoXFN5bWZvbnlFeGNsdWRlTGlzdFNpbXBsZVBocHVuaXQ6OmNsYXNzLCBmYWxzZSkpIHsKICAgICAgICBjbGFzcyBTeW1mb255RXhjbHVkZUxpc3RTaW1wbGVQaHB1bml0CiAgICAgICAgewogICAgICAgIH0KICAgIH0KICAgIGFycmF5X3NwbGljZSgkYXJndiwgMSwgMCwgWyctLWNvbG9ycz1hbHdheXMnXSk7CiAgICAkX1NFUlZFUlsnYXJndiddID0gJGFyZ3Y7CiAgICAkX1NFUlZFUlsnYXJnYyddID0gKyskYXJnYzsKICAgIGluY2x1ZGUgIiRQSFBVTklUX0RJUi8kUEhQVU5JVF9WRVJTSU9OX0RJUi9waHB1bml0IjsKfQoKZXhpdCgkZXhpdCk7CiI7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lc3BhY2VzIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGluY2x1ZGVzIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGZ1bmN0aW9ucyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjb25zdGFudHMiO2E6MDp7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY2xhc3NlcyI7YToxOntzOjMyOiJcU3ltZm9ueUV4Y2x1ZGVMaXN0U2ltcGxlUGhwdW5pdCI7TzozNToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18iOjExOntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czozMjoiXFN5bWZvbnlFeGNsdWRlTGlzdFNpbXBsZVBocHVuaXQiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czozMToiU3ltZm9ueUV4Y2x1ZGVMaXN0U2ltcGxlUGhwdW5pdCI7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBkb2NCbG9jayI7TjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AYWJzdHJhY3QiO2I6MDtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AZmluYWwiO2I6MDtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AcGFyZW50IjtOO3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBpbXBsZW1lbnRzIjthOjA6e31zOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AY29uc3RhbnRzIjthOjA6e31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AcHJvcGVydGllcyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAG1ldGhvZHMiO2E6MDp7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwB1c2VkVHJhaXRzIjthOjA6e31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AbG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjQzOTtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTowO319fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW50ZXJmYWNlcyI7YTowOnt9czo0MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQB0cmFpdHMiO2E6MDp7fX0=";